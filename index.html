<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Taiwan Pride 🌈｜Reservation Payment｜10/24 週五晚餐名單</title>
<style>
:root{
  /* S2 風格色盤 */
  --bg:#0A0B0F; --card:#10131A; --muted:#9AA4AF; --fg:#F2F5F8; --border:#1f2430;
  --ok:#22c55e; --warn:#f59e0b; --bad:#ef4444;
  --rainbow: linear-gradient(90deg,#ff5f6d,#ffc371,#9be15d,#00e3ae,#45aaf2,#9b59b6);
  --btn-grad: linear-gradient(90deg,#7dd3fc,#86efac);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:"Noto Sans TC","PingFang TC","Microsoft JhengHei",ui-sans-serif,system-ui;
  background: radial-gradient(800px 600px at 10% -10%, rgba(255,255,255,.06), transparent), var(--bg);
  color:var(--fg);
}
a{color:inherit;text-decoration:none}
.wrap{max-width:980px;margin:28px auto 64px;padding:0 14px}

/* 標題三行（白字＋光暈） */
.tl .t1,.tl .t2,.tl .t3{color:#fff;text-shadow:0 0 8px rgba(255,255,255,.28),0 0 18px rgba(255,255,255,.12)}
.tl .t1{font-size:28px;font-weight:900;line-height:1.15}
.tl .t2{font-size:22px;font-weight:800;opacity:.95}
.tl .t3{font-size:16px;font-weight:700;opacity:.9}
.rainbow-line{height:2px;background:var(--rainbow);opacity:.6;border-radius:2px;margin:6px 0 14px}

/* 搜尋/控制區塊 */
.card{
  position:relative;border-radius:16px;padding:14px;border:1px solid rgba(255,255,255,.06);
  background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02));
  box-shadow:0 10px 30px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.03);
  margin-bottom:12px;
}
.row{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:8px;align-items:end}
label{font-size:12px;color:var(--muted);margin-bottom:4px;display:block}
.input-wrap{display:flex;flex-direction:column;min-width:0}
input,button,select{
  width:100%;padding:11px 12px;border-radius:12px;border:1px solid var(--border);
  background:#0f1117;color:#0fffd1; /* 遵循舊版連結按鈕字色 */
  outline:none;font-size:14px
}
input{ color:var(--fg); }
input::placeholder{color:#6b7280}
button.primary{background:var(--btn-grad);border:0;color:#0b0c10;font-weight:900;letter-spacing:.2px}
button.primary:hover{filter:saturate(1.08);}

/* 統計列（頁面上方，保留中英） */
.stats{display:flex;gap:10px;flex-wrap:wrap;margin:8px 0 6px}
.chip{display:flex;align-items:center;gap:8px;background:#0f1117;border:1px solid #2b3244;border-radius:999px;padding:6px 10px;cursor:pointer}
.chip .dot{width:8px;height:8px;border-radius:50%}
.chip.total .dot{background:#a3e635}
.chip.paid .dot{background:#22c55e}
.chip.unpaid .dot{background:#ef4444}
/* NOTE chip */
.chip.note .dot{background:#60a5fa}
.chip .lab{font-size:12px;color:#aeb7c2}
.chip .num{font-size:13px;color:#fff;min-width:16px;text-align:right}

/* 結果列表 */
.grid{display:flex;flex-direction:column;gap:8px}
.person{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:10px;display:grid;gap:8px;cursor:pointer}
.line{display:flex;gap:10px;align-items:center;justify-content:space-between;flex-wrap:wrap}
.left,.right{display:flex;gap:10px;align-items:center;min-width:0}
.namebar{display:flex;align-items:center;gap:8px;min-width:0}
.flag{font-size:18px}
.personN{font-weight:900;font-size:15px;min-width:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.ig{font-size:13px;min-width:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis; text-transform:uppercase; } /* IG 顯示大寫 */
.country{opacity:.6}

/* 金色漸層（沿用舊樣式） */
.goldtext{
  background: linear-gradient(180deg,#EAD28A 0%,#D9B550 35%,#B98A32 70%,#7A6027 100%);
  -webkit-background-clip: text; background-clip: text; color: transparent; font-weight:900;
}

/* pay_status 徽章 */
.pay{display:inline-flex;align-items:center;gap:8px}
.badge{position:relative;width:22px;height:22px;display:grid;place-items:center;filter:drop-shadow(0 1px 2px rgba(0,0,0,.45))}
.badge svg{width:22px;height:22px;display:block}
.badge .ring{fill:#0f1117;stroke-width:2.6}
.badge .glyph{stroke:#fff;stroke-width:1.9;stroke-linecap:round;stroke-linejoin:round;fill:none}
.label{display:flex;flex-direction:column;line-height:1.05}
.label .zh{font-size:12px}
.label .en{font-size:11px;opacity:.9}
.paid .ring{stroke:var(--ok)}
.unpaid .ring{stroke:var(--bad)}

/* IG 圖示 */
.link-btn{display:inline-grid;place-items:center;width:28px;height:28px;border:none;background:transparent}
.link-btn img{width:24px;height:24px;border-radius:6px;display:block}

/* Toast & Modal（既有） */
.toast{position:fixed;left:50%;bottom:14px;transform:translateX(-50%);background:#0f1117;border:1px solid #2b3244;color:#e5e7eb;padding:8px 12px;border-radius:10px;box-shadow:0 10px 30px rgba(0,0,0,.45);opacity:0;transition:opacity .25s;z-index:60}
.toast.show{opacity:1}
.backdrop{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.6);z-index:50}
.modal{width:min(560px,92vw);background:#0f1117;border-radius:16px;border:1px solid #2b3244;padding:14px;box-shadow:0 20px 60px rgba(0,0,0,.5);position:relative}
.modal .title2{margin:0 0 10px;font-size:18px;font-weight:800}
.modal .rb{height:2px;background:var(--rainbow);opacity:.5;border-radius:2px;margin-bottom:10px}
.modal .actions{display:flex;gap:10px;justify-content:flex-end;margin-top:10px}

/* —— 彈窗按鈕沿用「邀請函下載」按鈕的螢光外觀 —— */
.modal .actions .btn{
  border: none !important;
  background: rgba(0,255,209,.08) !important;
  box-shadow: 0 0 0 1px rgba(0,255,209,.25), 0 0 18px rgba(0,255,209,.18) inset, 0 0 20px rgba(0,255,209,.15) !important;
  color: #e5e7eb !important;
  font-weight: 800 !important;
  padding: 6px 9px !important;
  border-radius: 10px !important;
  cursor:pointer;
}
.modal .actions .btn:hover{
  background: rgba(0,255,209,.08) !important;
  box-shadow: 0 0 0 1px rgba(0,255,209,.35), 0 0 22px rgba(0,255,209,.22) inset, 0 0 24px rgba(0,255,209,.20) !important;
  border: 1px solid transparent !important;
  border-image: var(--rainbow) 1 !important;
}
.btn{padding:8px 10px;border-radius:12px;border:1px solid #2b3244;background:#0f1117;color:#e5e7eb;font-weight:800;cursor:pointer}

/* 付款彈窗內的單選選項 */
.payopts{display:flex;gap:8px;flex-wrap:wrap;margin:10px 0}
.opt{flex:1;min-width:160px;text-align:center;padding:10px;border-radius:12px;border:1px dashed #2b3244;cursor:pointer;background:#0f1117;color:#9aa4af;font-weight:900}
.opt.active{border:0;background:var(--btn-grad);color:#0b0c10}

/* 概覽（依 Leader 分組） */
.ov-section{margin-top:14px}
.leader-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:10px}
.leader-card{background:#10131A;border:1px solid #2b3244;border-radius:12px;padding:10px;display:flex;flex-direction:column;gap:8px;position:relative}
.leader-head{display:flex;align-items:center;justify-content:space-between}
.leader-left{display:flex;align-items:center;gap:8px;min-width:0}
.leader-name{
  font-weight:900;
  background: var(--rainbow);
  -webkit-background-clip:text; background-clip:text; color:transparent;
}
.leader-name.overview{
  background:none; -webkit-background-clip:unset; background-clip:unset; color:#C7CED6; /* 總覽銀色 */
}
.leader-meta{font-size:12px;color:#9AA4AF;display:flex;align-items:center;gap:8px}
.meta-icon{display:inline-grid;place-items:center}
.meta-icon svg{width:12px;height:12px;display:block}

/* ✅ 打勾/叉小一點 */
.leader-actions{display:flex;gap:8px}
.leader-toggle{padding:4px 8px;border-radius:9px;border:1px solid #2b3244;background:#0f1117;color:#e5e7eb;font-size:12px;cursor:pointer}
.leader-toggle:hover{border-image:var(--rainbow) 1;border-width:1px;border-style:solid}
.leader-list{display:flex;flex-direction:column;gap:6px}
.member-line{display:flex;align-items:center;justify-content:space-between;background:rgba(255,255,255,.02);border:1px dashed #2b3244;border-radius:8px;padding:6px 8px;cursor:pointer}
.member-line:hover{background:rgba(255,255,255,.04)}
.mini{display:flex;align-items:center;gap:8px;min-width:0}
.mini .m-name{font-size:12px;max-width:140px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.mini .m-ig{font-size:11px;color:#9AA4AF;max-width:120px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis; text-transform:uppercase; } /* ✅ IG 大寫 */

/* 概覽顯示/隱藏控制：六色彩虹按鈕（收合時才出現） */
.ov-toggle{
  position:fixed;left:50%;bottom:12px;transform:translateX(-50%);
  display:none;align-items:center;gap:8px;padding:6px 12px;border-radius:999px;
  background:#0f1117;border:1px solid #2b3244;cursor:pointer;z-index:40;
}
.ov-toggle .dot{
  width:12px;height:12px;border-radius:999px;background:conic-gradient(#EF4444,#F59E0B,#FACC15,#22C55E,#3B82F6,#8B5CF6,#EF4444);
  box-shadow:0 0 10px rgba(255,255,255,.08) inset, 0 2px 8px rgba(0,0,0,.35);
}
.ov-toggle:hover{border-image:var(--rainbow) 1;border-width:1px;border-style:solid}

/* 個別隱藏列（六色彩虹圓點恢復） */
#ovHiddenBar{display:none;margin-top:8px;padding:8px 10px;border-top:1px solid #2b3244;background:#0f1117;border-radius:12px}
#ovHiddenTop{display:flex;align-items:center;justify-content:space-between;gap:6px;flex-wrap:wrap;margin-bottom:6px}
#ovHiddenList{display:flex;flex-wrap:wrap;gap:12px;max-height:96px;overflow:auto;padding:2px 0 6px}
.hchip{display:flex;align-items:center;gap:8px}
.hchip .dot{width:14px;height:14px;border-radius:999px;box-shadow:0 0 0 1px #2b3244 inset, 0 2px 8px rgba(0,0,0,.35);cursor:pointer}
.hchip .label{font-size:11px;color:#9AA4AF;max-width:140px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

/* 👁 隱藏按鈕：改為跟在桌長名字左邊，垂直置中 */
.leader-hide{
  position:static;
  display:inline-flex; align-items:center; justify-content:center;
  width:24px; height:24px; border:none; background:transparent; color:#9AA4AF;
  cursor:pointer; font-size:16px; line-height:1; transition:filter .15s ease;
}
.leader-hide:hover{filter:drop-shadow(0 0 6px rgba(255,255,255,.15))}

/* —— 控制面板四顆按鈕的排版：水平排列、保留間距、不連在一起 —— */
.fabrow{ display:flex; gap:8px; flex-wrap:wrap; margin-top:8px; }
.fab{ padding:10px 12px; border-radius:12px; border:1px solid(var(--border)); background:#0f1117; color:#e5e7eb; font-weight:800; cursor:pointer; }
.fab.primary{ background:var(--btn-grad); color:#0b0c10; border:0; }

/* Spinner */
.spinner{display:inline-block;width:14px;height:14px;margin-left:8px;vertical-align:-2px;border:2px solid rgba(255,255,255,.18);border-top-color:#a7f3d0;border-radius:50%;animation:spin .9s linear infinite;box-shadow:0 0 10px rgba(167,243,208,.35)}
@keyframes spin{to{transform:rotate(360deg)}}

@media (max-width:860px){
  .row{grid-template-columns:1fr}
  .fabrow{justify-content:flex-start}
}

/* ===== 表格共用（已繳費/未繳費清單 & NOTE） ===== */
.tablewrap{max-height:70vh;overflow:auto;border:1px solid #2b3244;border-radius:12px}
.table{width:100%;border-collapse:collapse;font-size:13px}
.table thead th{position:sticky;top:0;background:#0f1117;border-bottom:1px solid #2b3244;padding:8px 10px;text-align:left;color:#cbd5e1}
.table tbody td{border-bottom:1px dashed #2b3244;padding:6px 8px;color:#e5e7eb;vertical-align:top}
.table .muted{color:#9AA4AF}
.table .status-paid{color:#86efac;font-weight:800}
.table .status-unpaid{color:#fca5a5;font-weight:800}

/* ===== NOTE Modal ===== */
.note-filters{ display:flex;flex-direction:column;gap:6px;margin:8px 0;align-items:flex-start }
/* 第一行：搜尋與只看未繳費 + 三角切換 */
.nf-row1{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
.note-filters input[type="text"]{
  padding:4px 8px; border-radius:10px; border:1px solid #e5e7eb; background:#ffffff; color:#0b0c10;
  width:140px; max-width:42vw;
}
.note-filters label{display:inline-flex;align-items:center;gap:6px;font-size:12px;color:#9AA4AF;white-space:nowrap}
/* ✅ 讓 NOTE 的 checkbox 縮小 50% 並置中對齊 */
.note-filters input[type="checkbox"]{width:8px;height:8px;vertical-align:middle}
.nf-tri{ border:1px solid #2b3244; background:#0f1117; color:#e5e7eb; padding:4px 8px; border-radius:8px; cursor:pointer; line-height:1; font-size:12px; }
.nf-tri[aria-expanded="true"]::after{ content:" ▾"; }
.nf-tri[aria-expanded="false"]::after{ content:" ▸"; }

/* 第二行：進階（收合用） */
.nf-adv{display:none; align-items:center; gap:10px; flex-wrap:wrap}
.nf-adv.show{display:flex;}
.note-tight{white-space:nowrap}
.note-checkbox{width:7px;height:7px;cursor:pointer} /* ✅ 50% */
.note-select{background:#0f1117;border:1px solid #2b3244;color:#e5e7eb;border-radius:8px;padding:6px 8px;min-width:88px;max-width:140px}
.note-input{background:#0f1117;border:1px solid #2b3244;color:#e5e7eb;border-radius:8px;padding:6px 8px;width:100%}

/* 欄寬微調控制 */
.wctrl{display:inline-flex;align-items:center;gap:6px;font-size:12px;color:#9AA4AF}
.wctrl .btncol{display:flex;flex-direction:column;gap:2px}
.wbtn{ padding:2px 6px;border-radius:8px;border:1px solid #2b3244;background:#0f1117;color:#e5e7eb; font-size:11px;line-height:1;cursor:pointer;height:18px; }

/* ✅ NOTE 表格更緊湊 */
.table-note{table-layout:fixed; width:100%}
.table-note th,.table-note td{ padding:4px 6px; }
.table-note th.note-tight,.table-note td.note-tight{ padding:3px 6px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

/* ✅ 可調欄寬（以 CSS 變數驅動，JS 於渲染時設定） */
.table-note col.c-flag{width:40px}
.table-note col.c-name{width:var(--nameW,60px)}         /* 預設 60px */
.table-note col.c-ig{width:var(--igW,80px)}             /* ✅ 預設 80px */
.table-note col.c-leader{width:var(--leaderW,80px)}     /* ✅ 預設 80px */
.table-note col.c-status{width:64px}
.table-note col.c-confirm{width:72px}
.table-note col.c-method{width:110px}
.table-note col.c-note{width:110px}                     /* ✅ 跟方式一樣寬 */

/* ✅ 欄位顯示/隱藏（套在 table 上的 class） */
.table-note.hide-flag col.c-flag,
.table-note.hide-flag thead th:nth-child(1),
.table-note.hide-flag tbody td:nth-child(1){display:none}
.table-note.hide-name col.c-name,
.table-note.hide-name thead th:nth-child(2),
.table-note.hide-name tbody td:nth-child(2){display:none}
.table-note.hide-ig col.c-ig,
.table-note.hide-ig thead th:nth-child(3),
.table-note.hide-ig tbody td:nth-child(3){display:none}
.table-note.hide-leader col.c-leader,
.table-note.hide-leader thead th:nth-child(4),
.table-note.hide-leader tbody td:nth-child(4){display:none}
.table-note.hide-status col.c-status,
.table-note.hide-status thead th:nth-child(5),
.table-note.hide-status tbody td:nth-child(5){display:none}

/* ✅ 繳費狀態欄：置中顯示勾/叉 */
.table-note td.status-cell{text-align:center}

/* 📱 手機：把 NOTE 改成全螢幕＋表頭可見，並確保「備註」表頭不消失 */
@media (max-width:640px){
  #noteBackdrop{align-items:stretch; justify-content:stretch;}
  #noteBackdrop .modal{
    width:100vw; height:100vh; max-width:none; max-height:none;
    border-radius:0; border-left:none; border-right:none; padding:10px 10px 0;
    display:flex; flex-direction:column;
  }
  #noteBackdrop .note-filters{
    position:sticky; top:0; z-index:2; background:#0f1117; padding-top:6px; padding-bottom:8px; border-bottom:1px solid #2b3244;
  }
  #noteBackdrop .tablewrap{ flex:1; max-height:none; min-height:0; overflow:auto; }
  .nf-row1{display:grid; grid-template-columns:repeat(3, minmax(0,1fr)); gap:8px;}
  .note-filters input[type="text"]{width:100%; max-width:100%;}
  .note-small{margin-left:0}
  /* ✅ 讓「備註」表頭有最小可視寬度 */
  .table-note thead th:nth-child(8){min-width:72px}
}

/* ✅ 隱藏 NOTE 進階欄位的像素讀數（仍可調整） */
#wNameV,#wIgV,#wLeaderV{display:none;}

/* ✅ 通用：右上角關閉叉叉（置中於其框內） */
.modal-close,
.note-close{
  position:absolute; right:10px; top:10px;
  width:28px; height:28px; border:none; border-radius:8px;
  background:#0f1117; color:#e5e7eb; cursor:pointer;
  display:grid; place-items:center; line-height:1;
}
.modal-close:hover,.note-close:hover{border:1px solid #2b3244}
</style>
</head>
<body>
<div class="wrap">
  <!-- 標題 -->
  <div class="tl">
    <div class="t1">Taiwan Pride 🌈</div>
    <div class="t2">Reservation Payment</div>
    <div class="t3">10/24 週五晚餐名單</div>
  </div>
  <
